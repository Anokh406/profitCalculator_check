<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dream Profit Calculator</title>
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=League+Spartan&family=Poppins:wght@200&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.js"></script>
    <script src="js/custome.js"></script>
</head>

<body>
    <div class="container px-4 py-2 my-3">
        <h2 class="text-center my-sm-5 f_Leagesparton">Dream Profit Calculator</h2>
        <div class="row g-3 align-items-center">
            <div class="col-sm-6">
                <label for="DesiredProfit" class="f_poppins col-form-label fw-bold">Enter Your Desired Profit <span
                        class="text-danger">*</span></label><i class="fa fa-info-circle ms-2 text-success"></i>
            </div>
            <div class="col-sm-3">
                <input type="text" id="DesiredProfit" class="form-control number" placeholder="amount">
            </div>
        </div>
        <div class="row g-3 align-items-center" style="margin-top: -10px;">
            <div class="col-sm-6">
                <label for="corporateTax" class="f_poppins col-form-label fw-bold">Corporate Tax<span
                        class="text-danger">*</span></label><i class="fa fa-info-circle ms-2 text-success"></i>
            </div>
            <div class="col-sm-3">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="basic-addon1">%</span>
                    </div>
                    <input type="text" id="corporateTax" class="form-control number" placeholder="amount">
                </div>
            </div>
        </div>
        <div class="row g-3 align-items-center ProfitbeforeCorporateTax" style="margin-top: -10px;">
            <div class="col-sm-6">
                <label class="f_poppins col-form-label fw-bolder ">Profit you need to make before corporation
                    tax</label>
            </div>
            <div class="col-sm-3">
                <label id="profit_beforCorptax" class="f_poppins col-form-label fw-bold"></label>
            </div>
        </div>
        <hr>
        <p class="text-align f_poppins" style="font-size: 13px;">Run your profit and loss report for last year , Input Expenses for the Year from last year figures <i class="fa fa-info-circle ms-2 text-success"></i></p>
        <div class="row g-3 align-items-center Expense" style="margin-top: -10px;">
            <div class="col-sm-6"><input type="text" class="w-50 form-control expense_name" placeholder="Expense Name">
            </div>
            <div class="col-sm-3"><input type="text" class="form-control expense_amount" placeholder="Expense amount">
            </div>
            <div class="col-sm-3"><span class="text-align plus_icon shadow"><i class="fa fa-plus"></i></span>
            </div>
        </div>
        <div class="row g-3 align-items-center ProfitbeforeCorporateTax" style="margin-top: -10px;">
            <div class="col-sm-6">
                <label class="f_poppins col-form-label fw-bolder ">Gross profit you need to make as a result</label>
            </div>
            <div class="col-sm-3">
                <label id="grossProfit" class="f_poppins col-form-label fw-bold"></label>
                <input type="hidden" id="grossProfit_1" value="">
            </div>
        </div>
        <hr>
        <p class="text-align f_poppins" style="font-size: 13px;">Run your profit and loss report for last year
            <i class="fa fa-info-circle ms-2 text-success"></i>
        </p>
        <div class="row g-3 align-items-center CostOfProduct" style="margin-top: -10px;">
            <div class="col-sm-6"><input type="text" class="w-50 form-control ProductName number" placeholder="Product Name">
            </div>
            <div class="col-sm-3"><input type="text" class="form-control productCost" placeholder="Cost amount">
            </div>
            <div class="col-sm-3"><span class="text-align plus_icon_ProductCost shadow"><i
                        class="fa fa-plus"></i></span></div>
        </div>
        <div class="row g-3 align-items-center revenueGoal" style="margin-top: -10px;">
            <div class="col-sm-6">
                <label class="f_poppins col-form-label revenueGoal_label fw-bolder ">Revenue Goal</label>
            </div>
            <div class="col-sm-3">
                <label id="revenueGoal_val" class="f_poppins col-form-label fw-bold"></label>
                <input type="hidden" id="revenueGoal_val_1" value="">
            </div>
        </div>
        <hr>
        <p class="text-align f_poppins" style="font-size: 13px;">Breakdown your Revenue goal into different products or services (YOUR ACTION PLAN)<i class="fa fa-info-circle ms-2 text-success"></i></p>
        <div class="row g-3 align-items-center diffProduct" style="margin-top: -10px;">
            <div class="col-sm-6"><input type="text" class="w-50 form-control diffProduct_name" placeholder="Product Name">
            </div>
            <div class="col-sm-3"><input type="text" class="form-control diffProduct_amount" placeholder="amount">
            </div>
            <div class="col-sm-3"><span class="text-align plus_icon_diffProduct shadow"><i class="fa fa-plus"></i></span>
            </div>
        </div>
        <div class="row g-3 align-items-center revenueGoal" style="margin-top: -10px;">
            <div class="col-sm-6">
                <label class="f_poppins col-form-label totalAmount fw-bolder ">Total Estimated Amount</label>
            </div>
            <div class="col-sm-3">
                <label id="totalAmount_val" class="f_poppins col-form-label fw-bold"></label>
            </div>
        </div>
        <div class="row g-3 align-items-center revenueGoal" style="margin-top: -10px;">
            <div class="col-sm-6">
                <label class="f_poppins col-form-label fw-bolder ">ShortFall/Surplus</label>
            </div>
            <div class="col-sm-3">
                <label id="surplus" class="f_poppins col-form-label fw-bold"></label>
            </div>
        </div>
</body>
<script>
    function total_sum() {
        var desiredProfit = $('#DesiredProfit').val();
        var corporateTaxPercentage = $('#corporateTax').val();
        var calculateCorporateTax = desiredProfit * (corporateTaxPercentage / 100);
        // =====================================================gross profit val=========================================
        var expenses = perSectionTotal('.expense_amount', '#grossProfit');
        // =====================================================revenue goal val=========================================
        var productCost = perSectionTotal('.productCost', '#revenueGoal_val');
        // =========================================================estimated values=====================================================
        var diffproduct = perSectionTotal('.diffProduct_amount', '#totalAmount_val');
        $('#totalAmount_val').text(diffproduct);

        // =========================================================hidden field values=====================================================
        var toatal_grossProfit = $('#grossProfit_1').val(expenses);
        var total_revenue = $('#revenueGoal_val_1').val(productCost);
        var cal_exp = expenses + calculateCorporateTax;
        var revenue_exp = productCost + expenses + calculateCorporateTax;
        $('#grossProfit').text(cal_exp);
        $('#revenueGoal_val').text(revenue_exp);
        $('#surplus').text(diffproduct - revenue_exp||0) > 0 ? $('#surplus').text(diffproduct - revenue_exp||0) : $('#surplus').text(diffproduct - revenue_exp||0);
    }
    // ============================================================= Delete a input tag and its value ===========================================================================
    $(document).on('click', '.del_icon_1', function() {
        var desiredProfit = $('#DesiredProfit').val();
        var corporateTaxPercentage = $('#corporateTax').val();
        var calculateCorporateTax = desiredProfit * (corporateTaxPercentage / 100);
        var expenses = perSectionTotal('.expense_amount', '#grossProfit');
        var parentInputVal1 = $(this).parent('div').parent().find('.expense_amount').val();
        var exp = expenses - parentInputVal1;
        exp = exp + calculateCorporateTax;
        $('#grossProfit').text(exp);
        $(this).parent('div').parent('div').remove();
    });
    $(document).on('click', '.del_icon_2', function(selector, ValueOutputSelector) {
        var desiredProfit = $('#DesiredProfit').val();
        var corporateTaxPercentage = $('#corporateTax').val();
        var calculateCorporateTax = desiredProfit * (corporateTaxPercentage / 100);
        var expenses = $('.expense_amount').val();
        var parentInputVal1 = $('.del_icon_1').parent('div').parent().find('.expense_amount').val();
        var exp = +expenses + +calculateCorporateTax;
        var productCost = perSectionTotal('.productCost', '#revenueGoal_val');
        var parentInputVal2 = $(this).parent('div').parent().find('.productCost').val();
        var cost = productCost - parentInputVal2;
        cost = +cost + +exp;
        $('#revenueGoal_val').text(cost);
        $(this).parent('div').parent('div').remove();
    });
    $(document).on('click', '.del_icon_3', function(selector, ValueOutputSelector) {
        var diffproduct = perSectionTotal('.diffProduct_amount', '#totalAmount_val');
        var parentInputVal3 = $(this).parent('div').parent().find('.diffProduct_amount').val();
        var diff_Pro = diffproduct - parentInputVal3;
        $('#totalAmount_val').text(diff_Pro);
        $(this).parent('div').parent('div').remove();
    });

    // ===================================================Keyup to get input value =========================================================================
    $(document).on('keyup', 'input', function() {
        var desiredProfit = $('#DesiredProfit').val();
        var corporateTaxPercentage = $('#corporateTax').val();
        var calculateCorporateTax = desiredProfit * (corporateTaxPercentage / 100); // -------> 19%
        $('#profit_beforCorptax').text(calculateCorporateTax);
        total_sum();
    });
    //  ===============================================================Assign a value for all selections======================================================================================
    function perSectionTotal(selector, ValueOutputSelector) {
        var sum = 0;
        $(selector).each(function() {
            sum += parseFloat($(this).val()||0); // Or this.innerHTML, this.innerText
            $(ValueOutputSelector).text(sum);
        });
        return sum;
    }
    // ==============================================Add a new input tags to click plush button=================================================================
    $('.plus_icon').on('click', function() {
        var rowHtmlExpense = '<div class="row g-3 align-items-center Expense" style="margin-top: -10px;"><div class="col-sm-6"><input type="text" class="w-50 form-control expense_name" placeholder="Expense Name"></div><div class="col-sm-3"><input type="text" class="form-control expense_amount" placeholder="Expense amount"></div><div class="col-sm-3"><span class="text-align del_icon del_icon_1 shadow"><i class="fa fa-trash" ></i></span></div></div>';
        $('.Expense').last('div.Expense').after(rowHtmlExpense);
    });
    $('.plus_icon_ProductCost').on('click', function() {
        var rowHtmlCostOfProduct = '<div class="row g-3 align-items-center CostOfProduct" style="margin-top: -10px;"><div class="col-sm-6"><input type="text" class="w-50 form-control ProductName" placeholder="Product Name"></div><div class="col-sm-3"><input type="text" class="form-control productCost" placeholder="Cost amount"></div><div class="col-sm-3"><span class="text-align del_icon del_icon_2 shadow"><i class="fa fa-trash"></i></span></div></div>';
        $('.CostOfProduct').last('div.CostOfProduct').after(rowHtmlCostOfProduct);
    });
    $('.plus_icon_diffProduct').on('click', function() {
        var rowHtmldiffProduct = '<div class="row g-3 align-items-center diffProduct" style="margin-top: -10px;"><div class="col-sm-6"><input type="text" class="w-50 form-control diffProductname" placeholder="Product Name"></div><div class="col-sm-3"><input type="text" class="form-control diffProduct_amount" placeholder="amount"></div><div class="col-sm-3"><span class="text-align del_icon del_icon_3 shadow"><i class="fa fa-trash"></i></span></div></div>';
        $('.diffProduct').last('div.diffProduct').after(rowHtmldiffProduct);
    });
    // =======================================End of code========================================================================
</script>

</html>
